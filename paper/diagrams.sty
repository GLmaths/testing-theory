\RequirePackage{tikz}
\RequirePackage{color}

\usetikzlibrary{calc,arrows,shapes,decorations.pathmorphing,backgrounds,positioning,fit}

% \tikzstyle{distr} = [circle,fill=black!20,draw=black,thick,minimum size=5mm,
%                      node distance=10mm and 12mm,inner sep=2pt]%, on grid]

\tikzstyle{distr} = [circle,fill=black!20,draw=black,thick,minimum size=2mm,
                     node distance=10mm and 12mm,inner sep=0pt]%, on grid]
\tikzstyle{dot} = [circle,fill=black!20,draw=black,thick,minimum size=1mm,
                     node distance=10mm and 12mm,inner sep=1pt]


%\tikzstyle{hidden} = [draw=black!50,thick,minimum size=5mm, node distance=6mm, inner sep=3pt]
\tikzstyle{state} = [rectangle,rounded corners,draw=black,thick,
                     minimum size=5mm, node distance=10mm and 12mm,
                     inner sep=3pt]
\tikzstyle{legent} = [node distance=10mm and 12mm, inner sep=2pt]
\tikzstyle{action} = [auto]
\tikzstyle{from} = [<->, shorten <=1pt, >=stealth',semithick]
\tikzstyle{timeto} = [->>, shorten >=1pt, >=stealth',semithick]
\tikzstyle{to} = [->, shorten >=1pt, >=stealth',semithick]
\tikzstyle{todistr} = [-, shorten >=1pt, >=stealth',semithick]
%\tikzstyle{distrto} = [->, decorate, decoration={snake,pre length=1mm,post length=1mm}, shorten >=1pt, >=stealth',semithick]
%\tikzstyle{distrto} = [decorate, decoration={snake,pre length=1mm,post length=1mm}, shorten >=1pt, >=stealth',semithick]
\tikzstyle{distrto} = [->, decorate, decoration={snake,pre length=1mm,post length=1mm}, shorten >=1pt, >=stealth',semithick]
\tikzstyle{tosqunder} = [to,rounded corners,swap,
                         to path={ (\tikztostart.south)
                                   -- ++(0,-.5)
                                   -- ($(\tikztotarget.south) + (0,-.5)$)
                                   \tikztonodes
                                   -| (\tikztotarget.south) }]
\tikzstyle{loop wnw} = [loop,looseness=7,out=185,in=175]
\tikzstyle{loop nee} = [bend right,looseness=5,out=135,in=100]
\tikzstyle{loop ene} = [bend left,looseness=5,out=-80,in=-45]
\tikzstyle{loop ese} = [loop,looseness=7,out=5,in=-5]
\tikzstyle{loop sse} = [loop,looseness=12,out=260,in=320]
   